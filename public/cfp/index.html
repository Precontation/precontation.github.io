<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>0 - CFP</title>
    <link rel="icon" type="image/x-icon" href="/cfp/Not Clicked.png" />
    <link
      href="https://fonts.googleapis.com/css?family=Roboto"
      rel="stylesheet"
    />
    <style>
      html,
      body {
        max-width: 100%;
        overflow: hidden;
        margin: 0;
      }

      .button {
        outline: none;
        border: none;
        width: 25%;
        /* if you want it square, use height: 25% too */
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        user-select: none;
        image-rendering: pixelated;
      }

      .points {
        font-family: "Roboto", sans-serif;
        font-weight: 700;
        font-size: 10vw;
        color: white;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        user-select: none;
      }
    </style>
  </head>
  <body>
    <div
      style="text-align: center"
      ontouchstart="Click()"
      onmousedown="Click()"
    >
      <img
        class="button"
        id="button"
        src="/cfp/Not Clicked.png"
        alt="Click me"
      />
      <div class="points" id="points">0</div>
    </div>

    <script>
      const pointsText = document.getElementById("points");
      const buttonImage = document.getElementById("button");
      const notClicked = "/cfp/Not Clicked.png";
      const clicked = "/cfp/Clicked.png";

      let mouseDown = false;

      // prevent drag
      buttonImage.ondragstart = () => false;
      document.addEventListener("contextmenu", (e) => e.preventDefault());

      window.addEventListener("mousedown", () => {
        mouseDown = true;
        buttonImage.src = clicked;
      });

      window.addEventListener("mouseup", () => {
        if (mouseDown) {
          mouseDown = false;
          givePoints();
        }
      });

      document.addEventListener("keydown", (e) => {
        if (e.code === "Space") {
          buttonImage.src = clicked;
        }
      });

      document.addEventListener("keyup", (e) => {
        if (e.code === "Space") givePoints();
      });

      window.onload = () => {
        document.body.style.background = "#00ffff";
        if (localStorage.getItem("Points") === null) {
          localStorage.setItem("Points", 0);
        }
        updateDisplay();
      };

      function givePoints() {
        let pts = parseFloat(localStorage.getItem("Points")) || 0;
        localStorage.setItem("Points", pts + 1);
        updateDisplay();

        // random bg color
        const rand = "#" + Math.floor(Math.random() * 16777215).toString(16);
        document.body.style.background = rand;
        buttonImage.src = notClicked;
      }

      function updateDisplay() {
        const pts = localStorage.getItem("Points");
        pointsText.textContent = pts;
        document.title = `${pts} - CFP`;
      }
    </script>
  </body>
</html>
